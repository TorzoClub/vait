{"version":3,"file":"vait.common.js","sources":["../src/index.js"],"sourcesContent":["function vaitBase() {\n  let pass, fail\n\n  const promise = new Promise((resolve, reject) => {\n    pass = value => {\n      promise.__finally__ = true\n      promise.__value__ = value\n      resolve(value)\n      return promise\n    }\n\n    fail = error => {\n      promise.__finally__ = true\n      promise.__error__ = error\n      reject(error)\n      return promise\n    }\n  })\n\n  Object.assign(promise, {\n    __isVait__: true,\n    __finally__: false,\n    pass,\n    fail\n  })\n\n  return promise\n}\n\nfunction Vait(input) {\n  if (input instanceof Promise) {\n    return Vait.connect(input)\n  }\n\n  return vaitBase()\n}\n\nVait.connect = promise => {\n  const v = Vait()\n  promise.then(v.pass).catch(v.fail)\n  return v\n}\n\nVait.timeout = (timing, value) => {\n  const v = Vait()\n\n  const timeout_handle = setTimeout(v.pass, timing, value)\n\n  v.clear = () => clearTimeout(timeout_handle)\n\n  return v\n}\n\nVait.nextTick = () => Vait.timeout(0)\n\nmodule.exports = Vait\n"],"names":["vaitBase","pass","fail","promise","Promise","resolve","reject","value","__finally__","__value__","error","__error__","Object","assign","__isVait__","Vait","input","connect","v","then","catch","timeout","timing","timeout_handle","setTimeout","clear","clearTimeout","nextTick"],"mappings":";;AAAA,SAASA,QAAT,GAAoB;MACdC,IAAJ,EAAUC,IAAV;MAEMC,OAAO,GAAG,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;IAC/CL,IAAI,GAAG,cAAAM,KAAK,EAAI;MACdJ,OAAO,CAACK,WAAR,GAAsB,IAAtB;MACAL,OAAO,CAACM,SAAR,GAAoBF,KAApB;MACAF,OAAO,CAACE,KAAD,CAAP;aACOJ,OAAP;KAJF;;IAOAD,IAAI,GAAG,cAAAQ,KAAK,EAAI;MACdP,OAAO,CAACK,WAAR,GAAsB,IAAtB;MACAL,OAAO,CAACQ,SAAR,GAAoBD,KAApB;MACAJ,MAAM,CAACI,KAAD,CAAN;aACOP,OAAP;KAJF;GARc,CAAhB;EAgBAS,MAAM,CAACC,MAAP,CAAcV,OAAd,EAAuB;IACrBW,UAAU,EAAE,IADS;IAErBN,WAAW,EAAE,KAFQ;IAGrBP,IAAI,EAAJA,IAHqB;IAIrBC,IAAI,EAAJA;GAJF;SAOOC,OAAP;;;AAGF,SAASY,IAAT,CAAcC,KAAd,EAAqB;MACfA,KAAK,YAAYZ,OAArB,EAA8B;WACrBW,IAAI,CAACE,OAAL,CAAaD,KAAb,CAAP;;;SAGKhB,QAAQ,EAAf;;;AAGFe,IAAI,CAACE,OAAL,GAAe,UAAAd,OAAO,EAAI;MAClBe,CAAC,GAAGH,IAAI,EAAd;EACAZ,OAAO,CAACgB,IAAR,CAAaD,CAAC,CAACjB,IAAf,EAAqBmB,KAArB,CAA2BF,CAAC,CAAChB,IAA7B;SACOgB,CAAP;CAHF;;AAMAH,IAAI,CAACM,OAAL,GAAe,UAACC,MAAD,EAASf,KAAT,EAAmB;MAC1BW,CAAC,GAAGH,IAAI,EAAd;MAEMQ,cAAc,GAAGC,UAAU,CAACN,CAAC,CAACjB,IAAH,EAASqB,MAAT,EAAiBf,KAAjB,CAAjC;;EAEAW,CAAC,CAACO,KAAF,GAAU;WAAMC,YAAY,CAACH,cAAD,CAAlB;GAAV;;SAEOL,CAAP;CAPF;;AAUAH,IAAI,CAACY,QAAL,GAAgB;SAAMZ,IAAI,CAACM,OAAL,CAAa,CAAb,CAAN;CAAhB;;AAEA,OAAc,GAAGN,IAAjB;;;;"}